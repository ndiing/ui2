<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: tree/tree.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: tree/tree.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { html, nothing } from "lit";
import { MDComponent } from "../component/component.js";
import { ifDefined } from "lit/directives/if-defined.js";
import { MDRippleController } from "../ripple/ripple.js";
import { choose } from "lit/directives/choose.js";
import { isDefined } from "../functions/functions.js";

/**
 * {{desc}}
 * @extends MDComponent
 * @tagname md-tree
 * @fires MDTreeComponent#onTreeItemClick - {{desc}}
 */
class MDTreeComponent extends MDComponent {
    /**
     * @property {Array} list - {{desc}}
     * @property {String} variant - {{desc}}
     */
    static properties = {
        list: { type: Array },
        variant: { type: String },
    };

    variants = ["plain", "accordion", "tree", "level"];

    constructor() {
        super();

        this.variant = "tree";
    }

    renderTreeItem(item) {
        /* prettier-ignore */
        return html`
            &lt;md-tree-item
                .data="${item}"
                .icon="${ifDefined(item.icon)}"
                .label="${ifDefined(item.label)}"
                .badge="${ifDefined(item.badge)}"
                .selected="${ifDefined(item.selected)}"
                .routerLink="${ifDefined(item.routerLink)}"
                .indent="${ifDefined(item.indent)}"
                .isNode="${ifDefined(item.isNode)}"
                .expanded="${ifDefined(item.expanded)}"
                .activated="${ifDefined(item.activated)}"
                .variant="${ifDefined(this.variant)}"
                .isParent="${ifDefined(item.isParent)}"
                .nodeActions="${ifDefined(item.nodeActions)}"
                .nodeIcons="${ifDefined(item.nodeIcons)}"
                .leafIcons="${ifDefined(item.leafIcons)}"
                @click="${this.handleTreeItemClick}"
                @onTreeItemSelected="${this.handleTreeItemSelected}"
            >&lt;/md-tree-item>
            ${item.expanded &amp;&amp; item.children?.length ? item.children.map(item => this.renderTreeItem(item)) : nothing}
        `;
    }

    render() {
        /* prettier-ignore */
        return (this.variant == 'level' ? this.getList(this.list) || this.list : this.list)?.map(item => this.renderTreeItem(item));
    }

    connectedCallback() {
        super.connectedCallback();

        this.classList.add("md-tree");
    }

    async updated(changedProperties) {
        super.updated(changedProperties);

        if (changedProperties.has("variant")) {
            for (let i = 0; i &lt; this.variants.length; i++) {
                let variant = this.variants[i];
                this.classList.toggle(`${this.localName}--${variant}`, (this.variant ?? "").split(" ").includes(variant));
            }
        }

        if (changedProperties.has("list")) {
            await this.updateComplete;
            this.setList(this.list);
            this.requestUpdate();
        }
    }

    /**
     * {{desc}}
     */
    getList(list) {
        let children;

        for (let i = 0; i &lt; list.length; i++) {
            let item = list[i];

            if (item.expanded) {
                children = item.children;
            }

            if (item.children?.length) {
                const children_ = this.getList(item.children);

                if (children_) {
                    children = children_;
                }
            }
        }

        return children;
    }

    /**
     * {{desc}}
     */
    setList(list, indent = 0) {
        let expanded;
        let activated;

        for (let index = 0; index &lt; list.length; index++) {
            let item = list[index];
            item.indent = indent;

            if (item.expanded || item.selected) {
                expanded = true;
            }

            if (item.selected) {
                activated = true;
            }

            if (item.children?.length) {
                if (this.variant == "level") {
                    item.children.unshift({
                        label: item.label,
                        parent: item,
                        isParent: true,
                    });
                }

                item.isNode = true;

                const { expanded: isExpanded, activated: isActivated } = this.setList(item.children, indent + 1);

                if (isExpanded) {
                    expanded = true;
                    item.expanded = true;
                }

                if (isActivated) {
                    activated = true;
                    item.activated = true;
                }
            }
        }

        return { expanded, activated };
    }

    /**
     * {{desc}}
     */
    select(list, data) {
        let activated;

        for (let i = 0; i &lt; list.length; i++) {
            let item = list[i];
            item.selected = item == data;
            item.activated = false;

            if (item.selected) {
                activated = true;
            }

            if (item.children?.length) {
                if (this.select(item.children, data)) {
                    activated = true;
                    item.activated = true;
                }
            }
        }

        return activated;
    }

    /**
     * {{desc}}
     */
    expand(list, data) {
        data.expanded = !data.expanded;
    }

    handleTreeItemClick(event) {
        const data = event.currentTarget.data;

        if (data.isNode || data.isParent) {
            event.preventDefault();

            this.expand(this.list, data.isParent ? data.parent : data);
        } else {
            this.select(this.list, data);
        }

        this.requestUpdate();

        this.emit("onTreeItemClick", event);
    }

    handleTreeItemSelected() {}
}

customElements.define("md-tree", MDTreeComponent);

export { MDTreeComponent };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MDAttributeObserver.html">MDAttributeObserver</a></li><li><a href="MDBadgeComponent.html">MDBadgeComponent</a></li><li><a href="MDBottomAppBarComponent.html">MDBottomAppBarComponent</a></li><li><a href="MDBottomSheetComponent.html">MDBottomSheetComponent</a></li><li><a href="MDButtonComponent.html">MDButtonComponent</a></li><li><a href="MDCardComponent.html">MDCardComponent</a></li><li><a href="MDCheckboxComponent.html">MDCheckboxComponent</a></li><li><a href="MDChipComponent.html">MDChipComponent</a></li><li><a href="MDChipsComponent.html">MDChipsComponent</a></li><li><a href="MDColorPickerComponent.html">MDColorPickerComponent</a></li><li><a href="MDComponent.html">MDComponent</a></li><li><a href="MDDatePickerComponent.html">MDDatePickerComponent</a></li><li><a href="MDDatetimePickerComponent.html">MDDatetimePickerComponent</a></li><li><a href="MDDialogComponent.html">MDDialogComponent</a></li><li><a href="MDEmojiComponent.html">MDEmojiComponent</a></li><li><a href="MDFabComponent.html">MDFabComponent</a></li><li><a href="MDFormComponent.html">MDFormComponent</a></li><li><a href="MDGestureController.html">MDGestureController</a></li><li><a href="MDIconButtonComponent.html">MDIconButtonComponent</a></li><li><a href="MDIconComponent.html">MDIconComponent</a></li><li><a href="MDImageComponent.html">MDImageComponent</a></li><li><a href="MDListComponent.html">MDListComponent</a></li><li><a href="MDListItemComponent.html">MDListItemComponent</a></li><li><a href="MDMenuComponent.html">MDMenuComponent</a></li><li><a href="MDMonthPickerComponent.html">MDMonthPickerComponent</a></li><li><a href="MDNavigationBarComponent.html">MDNavigationBarComponent</a></li><li><a href="MDObserver.html">MDObserver</a></li><li><a href="MDPopperController.html">MDPopperController</a></li><li><a href="MDProgressIndicatorComponent.html">MDProgressIndicatorComponent</a></li><li><a href="MDRadioButtonComponent.html">MDRadioButtonComponent</a></li><li><a href="MDRippleController.html">MDRippleController</a></li><li><a href="MDRouter.html">MDRouter</a></li><li><a href="MDScrimComponent.html">MDScrimComponent</a></li><li><a href="MDSegmentedButtonComponent.html">MDSegmentedButtonComponent</a></li><li><a href="MDSheetComponent.html">MDSheetComponent</a></li><li><a href="MDSideSheetComponent.html">MDSideSheetComponent</a></li><li><a href="MDSliderComponent.html">MDSliderComponent</a></li><li><a href="MDSnackbarComponent.html">MDSnackbarComponent</a></li><li><a href="MDSwitchComponent.html">MDSwitchComponent</a></li><li><a href="MDTabsComponent.html">MDTabsComponent</a></li><li><a href="MDTextFieldComponent.html">MDTextFieldComponent</a></li><li><a href="MDTimePickerComponent.html">MDTimePickerComponent</a></li><li><a href="MDTooltipComponent.html">MDTooltipComponent</a></li><li><a href="MDTopAppBarComponent.html">MDTopAppBarComponent</a></li><li><a href="MDTreeComponent.html">MDTreeComponent</a></li><li><a href="MDTreeItemComponent.html">MDTreeItemComponent</a></li><li><a href="MDVirtualController.html">MDVirtualController</a></li><li><a href="MDWeekPickerComponent.html">MDWeekPickerComponent</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Wed Jun 26 2024 10:28:48 GMT+0700 (Western Indonesia Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
