<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: slider/slider.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: slider/slider.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { html } from "lit";
import { MDComponent } from "../component/component.js";
import { ifDefined } from "lit/directives/if-defined.js";
import { MDRippleController } from "../ripple/ripple.js";
import { calcDecimal, calcPercentage, isArrayString } from "../functions/functions.js";




/**
 * @extends MDComponent
 * @tagname md-slider
 * @fires MDSliderComponent#onSliderNativeInput - 
 * @fires MDSliderComponent#onSliderNativeReset - 
 */
class MDSliderComponent extends MDComponent {
    
    
    
    /**
     * @property {Array} defaultValue - 
     * @property {Number} min - 
     * @property {Number} max - 
     * @property {Number} step - 
     * @property {Boolean} disabled - 
     * @property {String} form - 
     * @property {String} name - 
     * @property {String} list - 
     * @property {String} autocomplete - 
     */
    static properties = {
        value: {
            type: Array,
            converter: {
                fromAttribute: (value, type) => {
                    if (!isArrayString(value)) {
                        value = `[${value}]`;
                    }
                    return JSON.parse(value);
                },
                toAttribute: (value, type) => {
                    return JSON.stringify(value);
                },
            },
        },
        defaultValue: { type: Array },
        min: { type: Number },
        max: { type: Number },
        step: { type: Number },
        disabled: { type: Boolean },
        form: { type: String },
        name: { type: String },
        list: { type: String },
        autocomplete: { type: String },
    };

    constructor() {
        super();

        this.type = "range";

        this.min = 0;
        this.max = 100;
        this.step = 1;
        this.value = [undefined];
    }

    renderTrack(value, index) {
        let length = 2;
        if (this.step > 1) {
            length = this.max / this.step;
        }
        length = length + 1;
        /* prettier-ignore */
        return html`
            &lt;div class="md-slider__track">
                ${Array.from({length},(v,k) => html`
                    &lt;div class="md-slider__indicator" value="${this.step*k}" ?activated="${(this.step*k)&lt;=value}">&lt;/div>
                `)}
            &lt;/div>
        `
    }

    render() {
        /* prettier-ignore */
        return html`
            &lt;label class="md-slider__inner">
                &lt;div class="md-slider__label">${this.type}&lt;/div>
                ${this.value.map((value,index) => html`
                    &lt;div class="md-slider__container md-slider__container${index+1}">
                        &lt;input 
                            .type="${this.type}" 
                            class="md-slider__native"
                            .value="${ifDefined(this.value?.[index])}"
                            .defaultValue="${ifDefined(this.defaultValue?.[index])}"
                            .min="${ifDefined(this.min)}"
                            .max="${ifDefined(this.max)}"
                            .step="${ifDefined(this.step)}"
                            .disabled="${ifDefined(this.disabled)}"
                            .form="${ifDefined(this.form)}"
                            .list="${ifDefined(this.list)}"
                            .autocomplete="${ifDefined(this.autocomplete)}"
                            @input="${this.handleSliderNativeInput}"
                            @reset="${this.handleSliderNativeReset}"
                        >
                        &lt;div class="md-slider__value">${value}&lt;/div>
                        ${this.renderTrack(value,index)}
                    &lt;/div>
                `)}
                &lt;input 
                    type="hidden" 
                    class="md-slider__hidden"
                    .name="${ifDefined(this.name)}"
                    .value="${ifDefined(this.value)}"
                >
            &lt;/label>
        `
    }

    async connectedCallback() {
        await super.connectedCallback();

        const defaultValue = this.max &lt; this.min ? this.min : this.min + (this.max - this.min) / 2;

        for (let index = 0; index &lt; this.value.length; index++) {
            this.value[index] = this.value[index] ?? defaultValue;
        }

        this.defaultValue = this.value.slice();

        this.classList.add("md-slider");

        await this.updateComplete;

        for (let index = 0; index &lt; this.natives.length; index++) {
            let native = this.natives[index];
            native.value = this.value[index];
            this.updateStyle(index);
        }
    }

    updateStyle(index) {
        const percentage = calcPercentage(this.min, this.max, this.value[index]);
        const decimal = calcDecimal(this.min, this.max, this.value[index]);

        this.style.setProperty("--md-comp-slider-percentage" + (index + 1), percentage + "%");
        this.style.setProperty("--md-comp-slider-decimal" + (index + 1), decimal);
    }

    async updated(changedProperties) {
        super.updated(changedProperties);

        if (changedProperties.has("min")) {
            if (this.min &lt; 0) {
                this.classList.add("md-slider--centered");
            }
        }
        if (changedProperties.has("step")) {
            if (this.step > 1) {
                this.classList.add("md-slider--discrete");
            }
        }
        if (changedProperties.has("value")) {
            if (this.value?.length > 1) {
                this.classList.add("md-slider--range");
            }
        }
    }

    
    
    
    /**
     * 
     */
    get natives() {
        return this.querySelectorAll(".md-slider__native");
    }

    handleSliderNativeInput(event) {
        if (this.value?.length > 1) {
            this.natives[0].value = Math.min(this.natives[0].value, this.value[1]);
            this.natives[1].value = Math.max(this.natives[1].value, this.value[0]);

            this.value[0] = this.natives[0].value;
            this.value[1] = this.natives[1].value;

            this.updateStyle(0);
            this.updateStyle(1);
        } else {
            this.value[0] = this.natives[0].value;
            this.updateStyle(0);
        }

        this.requestUpdate();
        this.emit("onSliderNativeInput", event);
    }

    handleSliderNativeReset(event) {
        for (let index = 0; index &lt; this.natives.length; index++) {
            let native = this.natives[index];
            native.value = this.defaultValue[index];
            this.value[index] = this.defaultValue[index];
            this.updateStyle(index);
        }

        this.requestUpdate();
        this.emit("onSliderNativeReset", event);
    }
}

customElements.define("md-slider", MDSliderComponent);

export { MDSliderComponent };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MDAttributeObserver.html">MDAttributeObserver</a></li><li><a href="MDBadgeComponent.html">MDBadgeComponent</a></li><li><a href="MDBottomAppBarComponent.html">MDBottomAppBarComponent</a></li><li><a href="MDBottomSheetComponent.html">MDBottomSheetComponent</a></li><li><a href="MDButtonComponent.html">MDButtonComponent</a></li><li><a href="MDCardComponent.html">MDCardComponent</a></li><li><a href="MDCheckboxComponent.html">MDCheckboxComponent</a></li><li><a href="MDChipComponent.html">MDChipComponent</a></li><li><a href="MDChipsComponent.html">MDChipsComponent</a></li><li><a href="MDColorPickerComponent.html">MDColorPickerComponent</a></li><li><a href="MDComponent.html">MDComponent</a></li><li><a href="MDDatePickerComponent.html">MDDatePickerComponent</a></li><li><a href="MDDatetimePickerComponent.html">MDDatetimePickerComponent</a></li><li><a href="MDDialogComponent.html">MDDialogComponent</a></li><li><a href="MDEmojiComponent.html">MDEmojiComponent</a></li><li><a href="MDFabComponent.html">MDFabComponent</a></li><li><a href="MDFormComponent.html">MDFormComponent</a></li><li><a href="MDGestureController.html">MDGestureController</a></li><li><a href="MDIconButtonComponent.html">MDIconButtonComponent</a></li><li><a href="MDIconComponent.html">MDIconComponent</a></li><li><a href="MDImageComponent.html">MDImageComponent</a></li><li><a href="MDListComponent.html">MDListComponent</a></li><li><a href="MDListItemComponent.html">MDListItemComponent</a></li><li><a href="MDMenuComponent.html">MDMenuComponent</a></li><li><a href="MDMonthPickerComponent.html">MDMonthPickerComponent</a></li><li><a href="MDNavigationBarComponent.html">MDNavigationBarComponent</a></li><li><a href="MDObserver.html">MDObserver</a></li><li><a href="MDPopperController.html">MDPopperController</a></li><li><a href="MDProgressIndicatorComponent.html">MDProgressIndicatorComponent</a></li><li><a href="MDRadioButtonComponent.html">MDRadioButtonComponent</a></li><li><a href="MDRippleController.html">MDRippleController</a></li><li><a href="MDRouter.html">MDRouter</a></li><li><a href="MDScrimComponent.html">MDScrimComponent</a></li><li><a href="MDSegmentedButtonComponent.html">MDSegmentedButtonComponent</a></li><li><a href="MDSheetComponent.html">MDSheetComponent</a></li><li><a href="MDSideSheetComponent.html">MDSideSheetComponent</a></li><li><a href="MDSliderComponent.html">MDSliderComponent</a></li><li><a href="MDSnackbarComponent.html">MDSnackbarComponent</a></li><li><a href="MDSwitchComponent.html">MDSwitchComponent</a></li><li><a href="MDTabsComponent.html">MDTabsComponent</a></li><li><a href="MDTextFieldComponent.html">MDTextFieldComponent</a></li><li><a href="MDTimePickerComponent.html">MDTimePickerComponent</a></li><li><a href="MDTooltipComponent.html">MDTooltipComponent</a></li><li><a href="MDTopAppBarComponent.html">MDTopAppBarComponent</a></li><li><a href="MDTreeComponent.html">MDTreeComponent</a></li><li><a href="MDTreeItemComponent.html">MDTreeItemComponent</a></li><li><a href="MDVirtualController.html">MDVirtualController</a></li><li><a href="MDWeekPickerComponent.html">MDWeekPickerComponent</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Wed Jun 26 2024 09:02:10 GMT+0700 (Western Indonesia Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
