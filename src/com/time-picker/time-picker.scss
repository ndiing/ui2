.md-time-picker {
    display: inline-flex;
    flex-direction: column;
    border-radius: var(--md-sys-shape-corner-large);
    background: var(--md-sys-color-surface-container-high);
    color: var(--md-sys-color-on-surface);
    box-shadow: var(--md-sys-elevation-level3);
    position: absolute;
    z-index: 4;
    transition-property: all;
    transition-duration: var(--md-sys-motion-duration-short4);
    transition-timing-function: cubic-bezier(var(--md-sys-motion-easing-legacy));

    &:not([open]) {
        opacity: 0;
        pointer-events: none;
    }
}

.md-time-picker__header {
    display: flex;
    align-items: center;
    padding: 16px;
    gap: 0 16px;
}

.md-time-picker__actions {
    display: inline-flex;
    align-items: center;
    gap: 0 16px;
}

// .md-time-picker__action {}

.md-time-picker__label {
    flex: 1;
    display: flex;
    align-items: center;
    height: 40px;
    gap: 0 8px;
}

.md-time-picker__label-primary {
    @include md-typography-title-small;
    @include md-ripple--button;
}

.md-time-picker__label-secondary {
    @include md-typography-title-small;
    @include md-ripple--button;
}

.md-time-picker__body {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.md-time-picker__inner {
    flex: 1;
    @include md-typography-body-medium;
}

.md-time-picker__footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 16px;
    gap: 0 8px;
}

// .md-time-picker__button {
// }

.md-time-picker__scrim {
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    z-index: 3;
    transition-property: all;
    transition-duration: var(--md-sys-motion-duration-short4);
    transition-timing-function: cubic-bezier(var(--md-sys-motion-easing-legacy));

    &:not([open]) {
        opacity: 0;
        pointer-events: none;
    }
}

.md-time-picker__card {
    display: flex;
    overflow: hidden;
    width: calc((32px * 7) + (4px * 6) + (16px * 2));
    height: calc((32px * 7) + (4px * 6));
}
.md-time-picker__card-item {
    flex: 1 0 100%;
    overflow: auto;
    transform: translate3d(calc((0 - var(--md-time-picker-index)) * 100%), 0%, 0px);
}

.md-time-picker__absolute {
    position: relative;
    margin: 0 16px;
    width: calc(100% - (16px * 2));
    height: 100%;
    border-radius: calc(100% / 2);
    background: var(--md-sys-color-surface-container-highest);
    color: var(--md-sys-color-on-surface);
    box-shadow: var(--md-sys-elevation-level0);
    position: relative;
    &::before {
        content: "";
        width: 8px;
        height: 8px;
        border-radius: calc(8px / 2);
        background: var(--md-sys-color-primary);
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate3d(-50%, -50%, 0);
    }
}
.md-time-picker__absolute-item {
    position: absolute;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    width: 32px;
    height: 32px;
    border-radius: calc(32px / 2);
    &:empty {
        width: calc(32px / 2);
        height: calc(32px / 2);
        border-radius: calc((32px / 2) / 2);
    }
    &::before {
        content: "";
        height: 2px;
        transform-origin: 100% 50%;
        background: var(--md-sys-color-primary);
        opacity: 0;
        position: absolute;
        right: 50%;
        top: 50%;
    }
    // @include md-ripple;
    &::after {
        width: 100%;
    }
    @include md-ripple--button;
    &:focus {
        @include md-ripple--focused;
    }
    &[activated] {
        border: 1px solid var(--md-sys-color-primary);
    }
    &[selected] {
        background: var(--md-sys-color-primary);
        color: var(--md-sys-color-on-primary);
        &::before {
            opacity: 100%;
        }
    }
    &:hover {
        @include md-ripple--hover;
        background: var(--md-sys-color-primary);
        color: var(--md-sys-color-on-primary);
        &::before {
            opacity: 100%;
        }
    }
    &:active {
        @include md-ripple--pressed;
    }
}

.md-time-picker__absolute {
    --size: 32px;
    --gap: 4px;
    --margin: 16px;
    --viewport: calc((var(--size) * 7) + (var(--gap) * 6) + (var(--margin) * 2));

    --circle: calc(var(--viewport) - (var(--margin) * 2) - (var(--gap) * 2) - var(--size));
    --radius: calc(var(--circle) / 2);
    --offset: calc(var(--radius) + var(--gap));

    --circle2: calc(var(--circle) - (var(--margin) * 2) - (var(--gap) * 2) - var(--size));
    --radius2: calc(var(--circle2) / 2);
    --offset2: calc(var(--radius2) + var(--gap) + var(--gap) + var(--size));

    --circle3: calc(var(--viewport) - (var(--margin) * 2) - (var(--gap) * 2) - var(--size));
    --radius3: calc(var(--circle3) / 2);
    --offset3: calc(var(--radius3) + var(--gap) + (var(--size) / 4));
}
.md-time-picker__absolute--hours {
    @for $i from 1 through 12 {
        .md-time-picker__absolute-item:nth-child(#{$i}) {
            left: calc(var(--radius) * cos(($i - 4) / 12 * 2 * pi) + var(--offset));
            top: calc(var(--radius) * sin(($i - 4) / 12 * 2 * pi) + var(--offset));

            &:before {
                transform: rotate(calc((360deg / 12) * ($i - 4)));
                width: var(--radius);
            }
        }
    }
    @for $i from 1 through 12 {
        .md-time-picker__absolute-item:nth-child(#{$i + 12}) {
            left: calc(var(--radius2) * cos(($i - 4) / 12 * 2 * pi) + var(--offset2));
            top: calc(var(--radius2) * sin(($i - 4) / 12 * 2 * pi) + var(--offset2));

            &:before {
                transform: rotate(calc((360deg / 12) * ($i - 4)));
                width: var(--radius2);
            }
        }
    }
}
.md-time-picker__absolute--minutes {
    @for $i from 1 through 60 {
        .md-time-picker__absolute-item:nth-child(#{$i}) {
            @if (($i - 16) % 5 == 0) {
                left: calc(var(--radius) * cos(($i - 16) / 60 * 2 * pi) + var(--offset));
                top: calc(var(--radius) * sin(($i - 16) / 60 * 2 * pi) + var(--offset));
                &:before {
                    transform: rotate(calc((360deg / 60) * ($i - 16)));
                    width: var(--radius);
                }
            } @else {
                left: calc(var(--radius3) * cos(($i - 16) / 60 * 2 * pi) + var(--offset3));
                top: calc(var(--radius3) * sin(($i - 16) / 60 * 2 * pi) + var(--offset3));
                &:before {
                    transform: rotate(calc((360deg / 60) * ($i - 16)));
                    width: var(--radius3);
                }
            }
        }
    }
}
